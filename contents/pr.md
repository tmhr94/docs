# PRレビュー依頼時のチェックリスト
## コード設計
- [ ] [継承と委譲](https://github.com/rikoroku/docs/blob/main/contents/oop.md)を正しく使い分けられているか？
- [ ] メソッドや変数のスコープは問題ないか？
- [ ] 結合度/凝集度の観点は問題ないか？
  - 外部クラスに依存している処理はDIを用い、インターフェースのみに依存させる。
  - 多くのことをやりすぎているクラスやメソッドは目的単位で分離させる。
- [ ] DRYなコードになっているか？
  - 過剰にDRYを追求し、不要な依存が生まないよう注意する。
- [ ] 運用を考慮した実装となっているか？
  - ログや通知の仕組みは必要最低限出来ているか？
- [ ] FWやSQLなどのアンチパターンを行っていないか？
- [ ] YAGNIやSOLIDなどの原則に反していないか？
  - [TODO] 他ページにまとめてリンクさせる

## リーダブルコード
- [ ] クラス名/変数名/メソッド名は適切か？コメントで説明が必要な命名は基本的には適切でない。
- [ ] 1年後の自分が見ても背景や意図がわかるようになっているか？
  - なっていなそうであればコメント書いたり、各種命名を適切なものに変更する。
- [ ] コーディング規約に則っているか(Linterが未導入の場合)
- [ ] メソッドやクラスの行数が大きくなりすぎていないか？
  - 一つの役割を担うように分割しよう。
- [ ] 引数の個数に依存はないか？
  - ハッシュなどで渡して、引数の順番や個数への依存をなくす。
- [ ] コミットの粒度は適切か？
  - レビュー時やgit logした際にわかりやすいものとなっているか？
    - コミットメッセージと異なる差分はrebaseなどして分離しよう。

## パフォーマンス
- [ ] 将来見込まれるレコード数を考慮したチューニングができているか？
  - SQLの実行計画を確認し、インデックスが有効かつ意図したものが選択されているか？
- [ ] キャッシュの仕組みは必要でないか確認できているか？
- [ ] 非同期に処理すべきところを同期的に実装していないか？

## DB
- [ ] トランザクションの粒度は適切か？
- [ ] 排他制御は適切か？
- [ ] NULLを許容しない設計となっているか？

## 仕様
- [ ] 仕様漏れがないか一通り動作確認したか？
- [ ] エラーや例外のハンドリングは考慮出来ているか？

## セキュリティ
- [ ] 権限/認証周りで不備はないか？
- [ ] SQLインジェクションなどの脆弱性を生むコードとなっていないか？
  - [TODO] 他ページにまとめてリンクさせる

## テストコード
- [ ] 仕様の説明となるような実装が出来ているか？
- [ ] 重要な箇所は境界値/異常値テストが網羅されているか？
- [ ] 保守性を担保できるテストとなっているか？
  - ライブラリのバージョン更新や処理の変更でデグレを未然に防げるか？
